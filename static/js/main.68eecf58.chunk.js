(this.webpackJsonpweather=this.webpackJsonpweather||[]).push([[0],{113:function(e,t,a){"use strict";a.r(t);a(83);var n=a(0),r=a.n(n),c=a(12),i=a(144),o=a(20),l=a.n(o),s=a(28),u=a(140),m={DATA:"DATA",GET_DATA:"GET_DATA",SHOW_ERROR:"SHOW_ERROR",GET_DATA_CITY:"GET_DATA_CITY"},d=a(14),p=a(26),f={data:null,loading:!1},b=function(e){return e.home},h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=Object(p.a)(t,["type"]);switch(a){case m.DATA:case m.CLEAR:return Object(d.a)(Object(d.a)({},e),n);default:return e}},y="DATA",E="SHOW_ERROR",O="SEARCH_CITY",g=a(25),j=a(70),v=a.n(j),x=a(148),S=a(145),w=a(151),C=a(147),D=a(138),A=a(149),T="/home",k="/search",N=Object(D.a)((function(e){return Object(A.a)({root:{display:"flex",flexWrap:"wrap",marginBottom:30},margin:{margin:e.spacing(1)},withoutLabel:{marginTop:e.spacing(3)},textField:{width:"25ch"},iconButton:{padding:10}})})),_=Object(n.memo)((function(e){var t=e.location,a=e.history,c=e.searchCity,i=e.inputData,o=N(),l=Object(n.useState)(""),s=Object(g.a)(l,2),u=s[0],m=s[1],d=Object(n.useCallback)((function(e){return function(e){m(e.target.value)}}),[]);Object(n.useEffect)((function(){!u&&m(i)}),[i,u]);var p=Object(n.useCallback)((function(){return function(e){u&&(c(u),t.pathname!==k&&a.push(k))}}),[u,c,t.pathname,a]);return r.a.createElement("div",{className:o.root},r.a.createElement(w.a,{fullWidth:!0,className:o.margin,variant:"outlined"},r.a.createElement(x.a,{htmlFor:"search-city"},"Search "),r.a.createElement(C.a,{labelWidth:60,id:"search-city",onChange:d("search"),endAdornment:r.a.createElement(S.a,{type:"button","aria-label":"search",onClick:p(),className:o.iconButton},r.a.createElement(v.a,null))})))}));_.defaultProps={inputData:""};var R=_,B=a(30),W=a(150),I=a(146),M=a(71),z=a.n(M),L=a(142),G=a(141),V=a(52),H=a.n(V),U=Object(D.a)((function(e){return Object(A.a)({root:{position:"relative"},cardContainer:{position:"relative"},btn:{position:"absolute",top:15,right:12,display:"block",zIndex:2},topCard:{display:"flex",flexDirection:"column"},title:{padding:0,display:"flex",fontSize:"1.8rem",flexDirection:"row"},bottomCard:{display:"flex",justifyContent:"space-between"},gridList:{width:"100%",height:"100%",justifyContent:"center"},footerBtn:{marginTop:20,borderRadius:0,padding:"20px 0"},temperature:{fontSize:"4rem"},temperatureSymbol:{fontSize:"1.7rem"}})})),Y=Object(n.memo)((function(e){var t=U(),a=e.isListener,c=e.id,i=e.name,o=e.country,l=e.windSpeed,s=e.humidity,m=e.pressure,d=e.temp,p=e.description,f=Object(n.useState)({isVisible:!1,id:null}),b=Object(g.a)(f,2),h=b[0],y=b[1],E=Object(n.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;e||!h.isVisible?y({isVisible:!0,id:e}):h.isVisible&&y({isVisible:!1,id:null})}),[h]);return r.a.createElement(u.a,{item:!0,xs:6,className:t.root,onMouseLeave:function(){return E()},onMouseEnter:function(){return E(c)}},r.a.createElement(I.a,{direction:"down",in:h.id===c},r.a.createElement("div",{className:t.btn},r.a.createElement(S.a,{color:"inherit","aria-label":"refresh {name} card",onClick:function(){return a("refresh",c)}},r.a.createElement(z.a,{fontSize:"large"})),r.a.createElement(S.a,{color:"inherit","aria-label":"delete {name} card",onClick:function(){return a("delete",c)}},r.a.createElement(H.a,{fontSize:"large"})))),r.a.createElement(B.b,{style:{textDecoration:"none"},to:"".concat(k,"/").concat(i)},r.a.createElement(W.a,{className:t.cardContainer,variant:"outlined"},r.a.createElement(G.a,{className:t.topCard},r.a.createElement(G.a,{className:t.title},r.a.createElement(L.a,{className:t.title,component:"h2",color:"textSecondary"},i),r.a.createElement(L.a,{className:t.title,component:"h2",color:"textSecondary"},", ",o)),r.a.createElement(L.a,{color:"textSecondary",gutterBottom:!0},p)),r.a.createElement(G.a,{className:t.bottomCard},r.a.createElement(G.a,{className:t.title},r.a.createElement(L.a,{className:t.temperature},d),r.a.createElement("sup",{className:t.temperatureSymbol},"\xb0C")),r.a.createElement(G.a,{className:t.topCard},r.a.createElement(L.a,{color:"textSecondary",gutterBottom:!0},"Wind: ",l," m/s"),r.a.createElement(L.a,{color:"textSecondary",gutterBottom:!0},"Humidity: ",s," %"),r.a.createElement(L.a,{color:"textSecondary",gutterBottom:!0},"Pressure: ",m," hpa"))))))}));function J(e){localStorage.removeItem("dataWeather"),localStorage.setItem("dataWeather",JSON.stringify([e]))}function P(){var e=localStorage.getItem("dataWeather");if(e)return JSON.parse(e)[0]}var F=Object(n.memo)((function(e){var t=Object(s.c)(b).data,a=Object(s.b)(),c=Object(n.useCallback)((function(){return a({type:m.GET_DATA})}),[a]),i=Object(n.useCallback)((function(e){return a({type:m.DATA,data:e})}),[a]),o=Object(n.useCallback)((function(e){return a({type:m.GET_DATA_CITY,id:e})}),[a]),d=Object(n.useCallback)((function(e){return a({type:O,str:e})}),[a]);Object(n.useEffect)((function(){var e=P();t||(e?i(e):c())}),[t,c,i]);var p=Object(n.useCallback)((function(e,a){if("delete"===e){var n=t;J(n=l.a.filter(n,(function(e){return a!==e.id}))),i(n)}else"refresh"===e&&o(a)}),[t,i,o]),f=Object(n.useMemo)((function(){return t&&l.a.map(t,(function(e){return{id:e.id,name:e.name,country:e.sys.country,windSpeed:e.wind.speed,humidity:e.main.humidity,pressure:e.main.pressure,temp:Math.round(e.main.temp),description:e.weather[0].description}}))}),[t]);return r.a.createElement("div",null,r.a.createElement(R,Object.assign({},e,{searchCity:d})),r.a.createElement(u.a,{container:!0,spacing:3},l.a.map(f,(function(e){return r.a.createElement(Y,Object.assign({isListener:p,key:e.id},e))}))))})),X=a(72),q=a.n(X),$=a(143),K=Object(D.a)((function(e){return Object(A.a)({root:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",height:"70vh"}})}));function Q(){var e=K(),t=Object(n.useState)(0),a=Object(g.a)(t,2),c=a[0],i=a[1];return Object(n.useEffect)((function(){var e=setInterval((function(){i((function(e){return e>=100?0:e+1}))}),20);return function(){clearInterval(e)}}),[]),r.a.createElement("div",{className:e.root},r.a.createElement($.a,{size:"20vw",variant:"determinate",value:c,color:"secondary"}))}var Z={currentCity:null,inputData:"",loading:!1},ee=function(e){return e.search},te=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Z,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=Object(p.a)(t,["type"]);switch(a){case m.DATA:case m.CLEAR:return Object(d.a)(Object(d.a)({},e),n);default:return e}};function ae(e){return~~(+e/1e3)}function ne(e){return new Date(1e3*e)}var re=Object(D.a)((function(e){return Object(A.a)({card:{position:"relative"},cardContainer:{flexGrow:0,maxWidth:"100%",flexBasis:"100%"},btn:{position:"absolute",bottom:15,right:12,display:"block",zIndex:2,backgroundColor:"rgba(0, 0, 0, 0.8)"},vertical:{display:"flex",flexDirection:"column"},infoWeather:{fontSize:"1.2rem",display:"flex",flexDirection:"column",alignSelf:"flex-end"},padding0:{padding:0},title:{padding:0,display:"flex",fontSize:"1.8rem",flexDirection:"row"},topCard:{padding:0,display:"flex",flexDirection:"row",justifyContent:"space-between"},bottomCard:{display:"flex",justifyContent:"space-between"},gridList:{width:"100%",height:"100%",justifyContent:"center"},footerBtn:{marginTop:20,borderRadius:0,padding:"20px 0"},temperature:{fontSize:"6rem",padding:"0 10%"},temperatureSymbol:{fontSize:"1.7rem"}})})),ce=Object(n.memo)((function(e){var t=re(),a=e.match,c=Object(s.c)(b).data,i=Object(s.c)(ee),o=i.currentCity,u=i.inputData,d=Object(n.useState)(!1),p=Object(g.a)(d,2),f=p[0],h=p[1],y=Object(n.useState)({isVisible:!1,id:null}),E=Object(g.a)(y,2),j=E[0],v=E[1],x=Object(s.b)(),w=Object(n.useCallback)((function(){return x({type:m.GET_DATA})}),[x]),C=Object(n.useCallback)((function(e){return x({type:m.DATA,data:e})}),[x]),D=Object(n.useCallback)((function(e){return x({type:O,str:e})}),[x]),A=Object(n.useCallback)((function(e){return x({type:m.GET_DATA_CITY,id:e})}),[x]);Object(n.useEffect)((function(){if(!c){var e=P();e?C(e):w()}o&&h(l.a.some(c,(function(e){return o.city.id===e.id}))),u||D(a.params.city)}),[o,c,w,u,a.params.city,D,C]);var T=Object(n.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;e||!j.isVisible?v({isVisible:!0,id:e}):j.isVisible&&v({isVisible:!1,id:null})}),[j]),k=Object(n.useCallback)((function(e,t){if("delete"===e){var a=c;J(a=l.a.filter(a,(function(e){return t!==e.id}))),C(a)}"add"===e&&(h(!f),A(t))}),[c,A,f,C]),N={weekday:"long",hour:"2-digit",minute:"2-digit"},_={hour:"2-digit",minute:"2-digit"},B=Object(n.useMemo)((function(){return o&&{id:o.city.id,name:o.city.name,country:o.city.country,windSpeed:o.list[0].wind.speed,humidity:o.list[0].main.humidity,pressure:o.list[0].main.pressure,weather:o.list[0].weather[0].main,temp:Math.round(o.list[0].main.temp),tempMax:Math.round(o.list[0].main.temp_max),tempMin:Math.round(o.list[0].main.temp_min),description:o.list[0].weather[0].description,timeSunset:ne(o.city.sunset).toLocaleDateString("en-US",_),timeSunrise:ne(o.city.sunrise).toLocaleDateString("en-US",_),timeWeatherReport:ne(o.list[0].dt).toLocaleDateString("en-US",N),weatherMap:l.a.map(o.list,(function(e){return{id:e.dt,weather:e.weather[0].main,temp:Math.round(e.main.temp),timeWeatherReport:ne(e.dt).toLocaleDateString("en-US",_)}}))}}),[o,N,_]);return B?r.a.createElement("div",{className:t.root},r.a.createElement(R,Object.assign({},e,{inputData:u,searchCity:D})),r.a.createElement(W.a,{variant:"outlined",className:t.card,onMouseLeave:function(){return T()},onMouseEnter:function(){return T(B.id)}},r.a.createElement(I.a,{direction:"up",in:j.id===B.id},r.a.createElement("div",{className:t.btn},f?r.a.createElement(S.a,{color:"inherit","aria-label":"delete {name} card",onClick:function(){return k("delete",B.id)}},r.a.createElement(H.a,{style:{color:"#fff"},fontSize:"large"})):r.a.createElement(S.a,{color:"inherit","aria-label":"add {name} card",onClick:function(){return k("add",B.id)}},r.a.createElement(q.a,{style:{color:"#fff"},fontSize:"large"})))),r.a.createElement(G.a,{className:t.topCard},r.a.createElement(G.a,{className:t.vertical},r.a.createElement(G.a,{className:t.title},r.a.createElement(L.a,{className:t.title,component:"h2"},B.name),r.a.createElement(L.a,{className:t.title,component:"h2"},", ",B.country)),r.a.createElement(L.a,{color:"textSecondary",gutterBottom:!0},B.timeWeatherReport),r.a.createElement(L.a,{color:"textSecondary",gutterBottom:!0},B.description)),r.a.createElement(G.a,{className:t.vertical},r.a.createElement(L.a,{color:"textSecondary",gutterBottom:!0},"time sunrise: ",B.timeSunrise),r.a.createElement(L.a,{color:"textSecondary",gutterBottom:!0},"time sunset: ",B.timeSunset))),r.a.createElement(G.a,{className:t.bottomCard},r.a.createElement(G.a,{className:t.vertical+t.padding0},r.a.createElement(G.a,{className:t.title},r.a.createElement(L.a,{className:t.temperature},B.temp),r.a.createElement("sup",{className:t.temperatureSymbol},"\xb0C")),r.a.createElement("br",null),r.a.createElement(G.a,{style:{padding:0},className:t.vertical},r.a.createElement(L.a,{color:"textSecondary",gutterBottom:!0},"min. temperature: ",B.tempMin,r.a.createElement("sup",null,"\xb0C")),r.a.createElement(L.a,{color:"textSecondary",gutterBottom:!0},"min. temperature: ",B.tempMax,r.a.createElement("sup",null,"\xb0C")))),r.a.createElement(G.a,{className:t.infoWeather},r.a.createElement(L.a,{color:"textSecondary",gutterBottom:!0},"Wind: ",B.windSpeed," m/s"),r.a.createElement(L.a,{color:"textSecondary",gutterBottom:!0},"Humidity: ",B.humidity," %"),r.a.createElement(L.a,{color:"textSecondary",gutterBottom:!0},"Pressure: ",B.pressure," hpa"))))):r.a.createElement(Q,null)})),ie=Object(D.a)((function(e){return Object(A.a)({header:{display:"flex",justifyContent:"space-between",alignItems:"center",height:"10vh",marginBottom:30,backgroundColor:"black",padding:20},title:{color:"#fff",fontSize:"3rem"}})})),oe=Object(n.memo)((function(){var e=ie();return r.a.createElement("header",{className:e.header},r.a.createElement(B.b,{style:{textDecoration:"none"},to:T},r.a.createElement(L.a,{className:e.title,component:"h1"}," Weather")))}));function le(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(oe,null),r.a.createElement(i.a,null,r.a.createElement(c.d,null,r.a.createElement(c.b,{path:T,component:F}),r.a.createElement(c.b,{path:"".concat(k,"/:city?"),component:ce}),r.a.createElement(c.a,{exact:!0,from:"/",to:T}))))}var se=a(17),ue=a.n(se),me=a(75),de=a(27),pe=a(15),fe=a.n(pe),be=a(9),he=a(73),ye="&appid=1e8e30d723f7ffb3faa125fbfafb5991",Ee=a.n(he).a.create({baseURL:"http://api.openweathermap.org/data/2.5"}),Oe=function(){return Ee({method:"get",url:"/find?lat=50&lon=36&cnt=30".concat(ye,"&units=metric")}).then((function(e){return e.data.list}))},ge=function(e){return Ee({method:"get",url:"/weather?id=".concat(e).concat(ye,"&units=metric")}).then((function(e){return e.data}))},je=function(e){return Ee({method:"get",url:"forecast?q=".concat(e).concat(ye,"&units=metric")}).then((function(e){return e.data}))},ve=fe.a.mark(we),xe=fe.a.mark(Ce),Se=fe.a.mark(De);function we(e){var t;return fe.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return e.type,Object(p.a)(e,["type"]),a.next=3,Object(be.d)({type:m.DATA,loading:!0});case 3:return a.prev=3,a.next=6,Object(be.b)(Oe);case 6:return J(t=a.sent),a.next=10,Object(be.d)({type:m.DATA,data:t});case 10:a.next=16;break;case 12:return a.prev=12,a.t0=a.catch(3),a.next=16,Object(be.d)({type:m.SHOW_ERROR});case 16:return a.next=18,Object(be.d)({type:m.DATA,loading:!1});case 18:case"end":return a.stop()}}),ve,null,[[3,12]])}function Ce(e){var t,a,n,r;return fe.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return e.type,t=Object(p.a)(e,["type"]),a=t.id,c.next=4,Object(be.d)({type:m.DATA,loading:!0});case 4:return c.next=6,Object(be.e)((function(e){return e.home.data}));case 6:return n=c.sent,c.prev=7,c.next=10,Object(be.b)(ge,a);case 10:return r=c.sent,J(n=l.a.map(n,(function(e){return a===e.id?Object(d.a)({},r):Object(d.a)({},e)}))),c.next=15,Object(be.d)({type:m.DATA,data:n});case 15:c.next=21;break;case 17:return c.prev=17,c.t0=c.catch(7),c.next=21,Object(be.d)({type:m.SHOW_ERROR});case 21:return c.next=23,Object(be.d)({type:m.DATA,loading:!1});case 23:case"end":return c.stop()}}),xe,null,[[7,17]])}function De(){return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(be.f)(m.GET_DATA,we);case 2:return e.next=4,Object(be.f)(m.GET_DATA_CITY,Ce);case 4:case"end":return e.stop()}}),Se)}var Ae=a(74),Te=fe.a.mark(Ne),ke=fe.a.mark(_e);function Ne(e){var t,a,n,r,c,i,o,s,u,m;return fe.a.wrap((function(f){for(;;)switch(f.prev=f.next){case 0:return e.type,t=Object(p.a)(e,["type"]),a=t.str,n=(new Date).setHours(0,0,0,0),n=new Date(n),r=n.setDate(n.getDate()+1),c=n.setDate(n.getDate()+2),i=ae(new Date(r)),o=ae(new Date(c)),f.next=10,Object(be.d)({type:y,loading:!0,inputData:a});case 10:return f.prev=10,f.next=13,Object(be.b)(je,a);case 13:return s=f.sent,console.log(s),u=s.list,(m=l.a.filter(u,(function(e){return i>=e.dt}))).length<=2&&l.a.filter(u,(function(e){return o>=e.dt})),f.next=20,Object(be.d)({type:y,currentCity:Object(d.a)(Object(d.a)({},s),{},{list:Object(Ae.a)(m)})});case 20:f.next=26;break;case 22:return f.prev=22,f.t0=f.catch(10),f.next=26,Object(be.d)({type:E});case 26:return f.next=28,Object(be.d)({type:y,loading:!1});case 28:case"end":return f.stop()}}),Te,null,[[10,22]])}function _e(){return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(be.g)(O,Ne);case 2:case"end":return e.stop()}}),ke)}var Re=fe.a.mark(Be);function Be(){return fe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(be.a)([Object(be.c)(De),Object(be.c)(_e)]);case 2:case"end":return e.stop()}}),Re)}var We=Be,Ie=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||de.d,Me=Object(de.c)({home:h,search:te}),ze=Object(me.a)(),Le=Object(de.e)(Me,Ie(Object(de.a)(ze)));ze.run(We);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));ue.a.render(r.a.createElement(B.a,{basename:"/weather"},r.a.createElement(s.a,{store:Le},r.a.createElement(le,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},82:function(e,t,a){e.exports=a(113)},83:function(e,t,a){}},[[82,1,2]]]);
//# sourceMappingURL=main.68eecf58.chunk.js.map