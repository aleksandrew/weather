(this.webpackJsonpweather=this.webpackJsonpweather||[]).push([[0],{114:function(e,t,a){"use strict";a.r(t);a(84);var n=a(0),r=a.n(n),c=a(12),i=a(20),o=a.n(i),l=a(28),s=a(143),u={DATA:"DATA",GET_DATA:"GET_DATA",SHOW_ERROR:"SHOW_ERROR",GET_DATA_CITY:"GET_DATA_CITY"},m=a(14),d=a(26),p={data:null,loading:!1},f=function(e){return e.home},b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=Object(d.a)(t,["type"]);switch(a){case u.DATA:case u.CLEAR:return Object(m.a)(Object(m.a)({},e),n);default:return e}},h=a(142),y=a(30),E=a(146),O=a(141),g=a(139),j=a(150),v=a(71),x=a.n(v),w="/home",S="/search",C=Object(g.a)((function(e){return Object(j.a)({header:{display:"flex",alignItems:"center",height:"10vh",marginBottom:30,backgroundColor:"black",padding:20},title:{color:"#fff",fontSize:"3rem"},button:{color:"#fff",marginRight:"5%"}})})),D=Object(n.memo)((function(){var e=C(),t=Object(c.g)();return r.a.createElement("header",{className:e.header},!t.location.pathname.includes("home")&&r.a.createElement(E.a,{"aria-label":"go back",className:e.button,onClick:function(){return t.goBack()}},r.a.createElement(x.a,{fontSize:"large"})),r.a.createElement(y.b,{style:{textDecoration:"none"},to:w},r.a.createElement(O.a,{className:e.title,component:"h1"}," Weather")))})),A=function(e){var t=e.children;return r.a.createElement(r.a.Fragment,null,r.a.createElement(D,null),r.a.createElement(h.a,null,t))},k=a(25),T=a(72),N=a.n(T),_=a(149),R=a(152),B=a(148),W=Object(g.a)((function(e){return Object(j.a)({root:{display:"flex",flexWrap:"wrap",marginBottom:30},margin:{margin:e.spacing(1)},withoutLabel:{marginTop:e.spacing(3)},textField:{width:"25ch"},iconButton:{padding:10}})})),M=Object(n.memo)((function(e){var t=e.location,a=e.history,c=e.searchCity,i=e.inputData,o=W(),l=Object(n.useState)(""),s=Object(k.a)(l,2),u=s[0],m=s[1],d=Object(n.useCallback)((function(e){return function(e){m(e.target.value)}}),[]);Object(n.useEffect)((function(){!u&&m(i)}),[i,u]);var p=Object(n.useCallback)((function(){return function(e){u&&(c(u),t.pathname!==S&&a.push(S))}}),[u,c,t.pathname,a]);return r.a.createElement("div",{className:o.root},r.a.createElement(R.a,{fullWidth:!0,className:o.margin,variant:"outlined"},r.a.createElement(_.a,{htmlFor:"search-city"},"Search "),r.a.createElement(B.a,{labelWidth:60,id:"search-city",onChange:d("search"),endAdornment:r.a.createElement(E.a,{type:"button","aria-label":"search",onClick:p(),className:o.iconButton},r.a.createElement(N.a,null))})))}));M.defaultProps={inputData:""};var z=M,I="DATA",L="SHOW_ERROR",V="SEARCH_CITY",G=a(151),H=a(147),U=a(73),Y=a.n(U),F=a(144),J=a(53),P=a.n(J),X=Object(g.a)((function(e){return Object(j.a)({root:{position:"relative"},cardContainer:{position:"relative"},btn:{position:"absolute",top:15,right:12,display:"block",zIndex:2},topCard:{display:"flex",flexDirection:"column"},title:{padding:0,display:"flex",fontSize:"1.8rem",flexDirection:"row"},bottomCard:{display:"flex",justifyContent:"space-between"},gridList:{width:"100%",height:"100%",justifyContent:"center"},footerBtn:{marginTop:20,borderRadius:0,padding:"20px 0"},temperature:{fontSize:"4rem"},temperatureSymbol:{fontSize:"1.7rem"}})})),q=Object(n.memo)((function(e){var t=X(),a=e.isListener,c=e.id,i=e.name,o=e.country,l=e.windSpeed,u=e.humidity,m=e.pressure,d=e.temp,p=e.description,f=e.searchCity,b=Object(n.useState)({isVisible:!1,id:null}),h=Object(k.a)(b,2),g=h[0],j=h[1],v=Object(n.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;e||!g.isVisible?j({isVisible:!0,id:e}):g.isVisible&&j({isVisible:!1,id:null})}),[g]);return r.a.createElement(s.a,{item:!0,xs:6,className:t.root,onMouseLeave:function(){return v()},onMouseEnter:function(){return v(c)}},r.a.createElement(H.a,{direction:"down",in:g.id===c},r.a.createElement("div",{className:t.btn},r.a.createElement(E.a,{color:"inherit","aria-label":"refresh {name} card",onClick:function(){return a("refresh",c)}},r.a.createElement(Y.a,{fontSize:"large"})),r.a.createElement(E.a,{color:"inherit","aria-label":"delete {name} card",onClick:function(){return a("delete",c)}},r.a.createElement(P.a,{fontSize:"large"})))),r.a.createElement(y.b,{style:{textDecoration:"none"},onClick:function(){return f(i)},to:"".concat(S,"/").concat(i)},r.a.createElement(G.a,{className:t.cardContainer,variant:"outlined"},r.a.createElement(F.a,{className:t.topCard},r.a.createElement(F.a,{className:t.title},r.a.createElement(O.a,{className:t.title,component:"h2",color:"textSecondary"},i),r.a.createElement(O.a,{className:t.title,component:"h2",color:"textSecondary"},", ",o)),r.a.createElement(O.a,{color:"textSecondary",gutterBottom:!0},p)),r.a.createElement(F.a,{className:t.bottomCard},r.a.createElement(F.a,{className:t.title},r.a.createElement(O.a,{className:t.temperature},d),r.a.createElement("sup",{className:t.temperatureSymbol},"\xb0C")),r.a.createElement(F.a,{className:t.topCard},r.a.createElement(O.a,{color:"textSecondary",gutterBottom:!0},"Wind: ",l," m/s"),r.a.createElement(O.a,{color:"textSecondary",gutterBottom:!0},"Humidity: ",u," %"),r.a.createElement(O.a,{color:"textSecondary",gutterBottom:!0},"Pressure: ",m," hpa"))))))}));function $(e){localStorage.removeItem("dataWeather"),localStorage.setItem("dataWeather",JSON.stringify([e]))}var K=Object(n.memo)((function(e){var t=Object(l.c)(f).data,a=Object(l.b)(),c=Object(n.useCallback)((function(){return a({type:u.GET_DATA})}),[a]),i=Object(n.useCallback)((function(e){return a({type:u.DATA,data:e})}),[a]),m=Object(n.useCallback)((function(e){return a({type:u.GET_DATA_CITY,id:e})}),[a]),d=Object(n.useCallback)((function(e){return a({type:V,str:e})}),[a]);Object(n.useEffect)((function(){var e=function(){var e=localStorage.getItem("dataWeather");if(e)return JSON.parse(e)[0]}();t||(e?i(e):c())}),[t,c,i]);var p=Object(n.useCallback)((function(e,a){if("delete"===e){var n=t;$(n=o.a.filter(n,(function(e){return a!==e.id}))),i(n)}else"refresh"===e&&m(a)}),[t,i,m]),b=Object(n.useMemo)((function(){return t&&o.a.map(t,(function(e){return{id:e.id,name:e.name,country:e.sys.country,windSpeed:e.wind.speed,humidity:e.main.humidity,pressure:e.main.pressure,temp:Math.round(e.main.temp),description:e.weather[0].description}}))}),[t]);return r.a.createElement(A,null,r.a.createElement(z,Object.assign({},e,{searchCity:d})),r.a.createElement(s.a,{container:!0,spacing:3},o.a.map(b,(function(e){return r.a.createElement(q,Object.assign({searchCity:d,isListener:p,key:e.id},e))}))))})),Q=a(45),Z=a(74),ee=a.n(Z),te=a(145),ae=Object(g.a)((function(e){return Object(j.a)({root:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%",height:"100vh"}})}));function ne(){var e=ae(),t=Object(n.useState)(0),a=Object(k.a)(t,2),c=a[0],i=a[1];return Object(n.useEffect)((function(){var e=setInterval((function(){i((function(e){return e>=100?0:e+1}))}),20);return function(){clearInterval(e)}}),[]),r.a.createElement("div",{className:e.root},r.a.createElement(te.a,{size:"20vw",variant:"determinate",value:c,color:"secondary"}))}var re={currentCity:null,inputData:"",loading:!1},ce=function(e){return e.search},ie=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:re,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=Object(d.a)(t,["type"]);switch(a){case u.DATA:case u.CLEAR:return Object(m.a)(Object(m.a)({},e),n);default:return e}};function oe(e){return~~(+e/1e3)}function le(e){return new Date(1e3*e)}var se=Object(g.a)((function(e){return Object(j.a)({card:{position:"relative"},cardContainer:{flexGrow:0,maxWidth:"100%",flexBasis:"100%"},btn:{position:"absolute",bottom:15,right:12,display:"block",zIndex:2,backgroundColor:"rgba(0, 0, 0, 0.8)"},vertical:{display:"flex",flexDirection:"column"},infoWeather:{fontSize:"1.2rem",display:"flex",flexDirection:"column",alignSelf:"flex-end"},padding0:{padding:0},title:{padding:0,display:"flex",fontSize:"1.8rem",flexDirection:"row"},topCard:{padding:0,display:"flex",flexDirection:"row",justifyContent:"space-between"},bottomCard:{display:"flex",justifyContent:"space-between"},gridList:{width:"100%",height:"100%",justifyContent:"center"},footerBtn:{marginTop:20,borderRadius:0,padding:"20px 0"},temperature:{fontSize:"6rem",padding:"0 10%"},temperatureSymbol:{fontSize:"1.7rem"}})})),ue=Object(n.memo)((function(e){var t=se(),a=e.match,c=Object(l.c)(f).data,i=Object(l.c)(ce),s=i.currentCity,d=i.inputData,p=Object(n.useState)(!1),b=Object(k.a)(p,2),h=b[0],y=b[1],g=Object(n.useState)({isVisible:!1,id:null}),j=Object(k.a)(g,2),v=j[0],x=j[1],w=Object(l.b)(),S=Object(n.useCallback)((function(){return w({type:u.GET_DATA})}),[w]),C=Object(n.useCallback)((function(e){return w({type:u.DATA,data:e})}),[w]),D=Object(n.useCallback)((function(e){return w({type:V,str:e})}),[w]);Object(n.useEffect)((function(){s&&y(o.a.some(c,(function(e){return s.city.id===e.id}))),d||D(a.params.city)}),[s,c,S,d,a.params.city,D,C]);var T=Object(n.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;e||!v.isVisible?x({isVisible:!0,id:e}):v.isVisible&&x({isVisible:!1,id:null})}),[v]),N=Object(n.useCallback)((function(e,t){var a;if("delete"===e&&(a=o.a.filter(c,(function(e){return t!==e.id}))),"add"===e){var n={id:s.city.id,name:s.city.name,sys:{country:s.city.country},wind:{speed:s.list[0].wind.speed},weather:[{description:s.list[0].weather[0].description}],main:{humidity:s.list[0].main.humidity,pressure:s.list[0].main.pressure,temp:s.list[0].main.temp}};a=[Object(m.a)({},n)].concat(Object(Q.a)(c))}C(a),$(a)}),[c,C,s]),_={weekday:"long",hour:"2-digit",minute:"2-digit"},R={hour:"2-digit",minute:"2-digit"},B=Object(n.useMemo)((function(){return s&&{id:s.city.id,name:s.city.name,country:s.city.country,windSpeed:s.list[0].wind.speed,humidity:s.list[0].main.humidity,pressure:s.list[0].main.pressure,weather:s.list[0].weather[0].main,temp:Math.round(s.list[0].main.temp),tempMax:Math.round(s.list[0].main.temp_max),tempMin:Math.round(s.list[0].main.temp_min),description:s.list[0].weather[0].description,timeSunset:le(s.city.sunset).toLocaleDateString("en-US",R),timeSunrise:le(s.city.sunrise).toLocaleDateString("en-US",R),timeWeatherReport:le(s.list[0].dt).toLocaleDateString("en-US",_),weatherMap:o.a.map(s.list,(function(e){return{id:e.dt,weather:e.weather[0].main,temp:Math.round(e.main.temp),timeWeatherReport:le(e.dt).toLocaleDateString("en-US",R)}}))}}),[s,_,R]);return B?r.a.createElement(A,null,r.a.createElement("div",{className:t.root},r.a.createElement(z,Object.assign({},e,{inputData:d,searchCity:D})),r.a.createElement(G.a,{variant:"outlined",className:t.card,onMouseLeave:function(){return T()},onMouseEnter:function(){return T(B.id)}},r.a.createElement(H.a,{direction:"up",in:v.id===B.id},r.a.createElement("div",{className:t.btn},h?r.a.createElement(E.a,{color:"inherit","aria-label":"delete {name} card",onClick:function(){return N("delete",B.id)}},r.a.createElement(P.a,{style:{color:"#fff"},fontSize:"large"})):r.a.createElement(E.a,{color:"inherit","aria-label":"add {name} card",onClick:function(){return N("add",B.id)}},r.a.createElement(ee.a,{style:{color:"#fff"},fontSize:"large"})))),r.a.createElement(F.a,{className:t.topCard},r.a.createElement(F.a,{className:t.vertical},r.a.createElement(F.a,{className:t.title},r.a.createElement(O.a,{className:t.title,component:"h2"},B.name),r.a.createElement(O.a,{className:t.title,component:"h2"},", ",B.country)),r.a.createElement(O.a,{color:"textSecondary",gutterBottom:!0},B.timeWeatherReport),r.a.createElement(O.a,{color:"textSecondary",gutterBottom:!0},B.description)),r.a.createElement(F.a,{className:t.vertical},r.a.createElement(O.a,{color:"textSecondary",gutterBottom:!0},"time sunrise: ",B.timeSunrise),r.a.createElement(O.a,{color:"textSecondary",gutterBottom:!0},"time sunset: ",B.timeSunset))),r.a.createElement(F.a,{className:t.bottomCard},r.a.createElement(F.a,{className:t.vertical+t.padding0},r.a.createElement(F.a,{className:t.title},r.a.createElement(O.a,{className:t.temperature},B.temp),r.a.createElement("sup",{className:t.temperatureSymbol},"\xb0C")),r.a.createElement("br",null),r.a.createElement(F.a,{style:{padding:0},className:t.vertical},r.a.createElement(O.a,{color:"textSecondary",gutterBottom:!0},"min. temperature: ",B.tempMin,r.a.createElement("sup",null,"\xb0C")),r.a.createElement(O.a,{color:"textSecondary",gutterBottom:!0},"min. temperature: ",B.tempMax,r.a.createElement("sup",null,"\xb0C")))),r.a.createElement(F.a,{className:t.infoWeather},r.a.createElement(O.a,{color:"textSecondary",gutterBottom:!0},"Wind: ",B.windSpeed," m/s"),r.a.createElement(O.a,{color:"textSecondary",gutterBottom:!0},"Humidity: ",B.humidity," %"),r.a.createElement(O.a,{color:"textSecondary",gutterBottom:!0},"Pressure: ",B.pressure," hpa")))))):r.a.createElement(ne,null)}));function me(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(c.d,null,r.a.createElement(c.b,{path:w,component:K}),r.a.createElement(c.b,{path:"".concat(S,"/:city?"),component:ue}),r.a.createElement(c.a,{exact:!0,from:"/",to:w})))}var de=a(17),pe=a.n(de),fe=a(76),be=a(27),he=a(15),ye=a.n(he),Ee=a(9),Oe=a(75),ge="&appid=36c1f43a7b5290d7522108114bec530d",je=a.n(Oe).a.create({baseURL:"https://api.openweathermap.org/data/2.5"}),ve=function(){return je({method:"get",url:"/find?lat=50&lon=36&cnt=30".concat(ge,"&units=metric")}).then((function(e){return e.data.list}))},xe=function(e){return je({method:"get",url:"/weather?id=".concat(e).concat(ge,"&units=metric")}).then((function(e){return e.data}))},we=function(e){return je({method:"get",url:"forecast?q=".concat(e).concat(ge,"&units=metric")}).then((function(e){return e.data}))},Se=ye.a.mark(Ae),Ce=ye.a.mark(ke),De=ye.a.mark(Te);function Ae(e){var t;return ye.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return e.type,Object(d.a)(e,["type"]),a.next=3,Object(Ee.d)({type:u.DATA,loading:!0});case 3:return a.prev=3,a.next=6,Object(Ee.b)(ve);case 6:return $(t=a.sent),a.next=10,Object(Ee.d)({type:u.DATA,data:t});case 10:a.next=16;break;case 12:return a.prev=12,a.t0=a.catch(3),a.next=16,Object(Ee.d)({type:u.SHOW_ERROR});case 16:return a.next=18,Object(Ee.d)({type:u.DATA,loading:!1});case 18:case"end":return a.stop()}}),Se,null,[[3,12]])}function ke(e){var t,a,n,r;return ye.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return e.type,t=Object(d.a)(e,["type"]),a=t.id,c.next=4,Object(Ee.d)({type:u.DATA,loading:!0});case 4:return c.next=6,Object(Ee.e)((function(e){return e.home.data}));case 6:return n=c.sent,c.prev=7,c.next=10,Object(Ee.b)(xe,a);case 10:return r=c.sent,$(n=o.a.map(n,(function(e){return a===e.id?Object(m.a)({},r):Object(m.a)({},e)}))),c.next=15,Object(Ee.d)({type:u.DATA,data:n});case 15:c.next=21;break;case 17:return c.prev=17,c.t0=c.catch(7),c.next=21,Object(Ee.d)({type:u.SHOW_ERROR});case 21:return c.next=23,Object(Ee.d)({type:u.DATA,loading:!1});case 23:case"end":return c.stop()}}),Ce,null,[[7,17]])}function Te(){return ye.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Ee.f)(u.GET_DATA,Ae);case 2:return e.next=4,Object(Ee.f)(u.GET_DATA_CITY,ke);case 4:case"end":return e.stop()}}),De)}var Ne=ye.a.mark(Re),_e=ye.a.mark(Be);function Re(e){var t,a,n,r,c,i,l,s,u,p;return ye.a.wrap((function(f){for(;;)switch(f.prev=f.next){case 0:return e.type,t=Object(d.a)(e,["type"]),a=t.str,n=(new Date).setHours(0,0,0,0),n=new Date(n),r=n.setDate(n.getDate()+1),c=n.setDate(n.getDate()+2),i=oe(new Date(r)),l=oe(new Date(c)),f.next=10,Object(Ee.d)({type:I,loading:!0,inputData:a});case 10:return f.prev=10,f.next=13,Object(Ee.b)(we,a);case 13:return s=f.sent,u=s.list,(p=o.a.filter(u,(function(e){return i>=e.dt}))).length<=2&&o.a.filter(u,(function(e){return l>=e.dt})),console.log(Object(m.a)(Object(m.a)({},s),{},{list:Object(Q.a)(p)})),f.next=20,Object(Ee.d)({type:I,currentCity:Object(m.a)(Object(m.a)({},s),{},{list:Object(Q.a)(p)})});case 20:f.next=26;break;case 22:return f.prev=22,f.t0=f.catch(10),f.next=26,Object(Ee.d)({type:L});case 26:return f.next=28,Object(Ee.d)({type:I,loading:!1});case 28:case"end":return f.stop()}}),Ne,null,[[10,22]])}function Be(){return ye.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Ee.g)(V,Re);case 2:case"end":return e.stop()}}),_e)}var We=ye.a.mark(Me);function Me(){return ye.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Ee.a)([Object(Ee.c)(Te),Object(Ee.c)(Be)]);case 2:case"end":return e.stop()}}),We)}var ze=Me,Ie=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||be.d,Le=Object(be.c)({home:b,search:ie}),Ve=Object(fe.a)(),Ge=Object(be.e)(Le,Ie(Object(be.a)(Ve)));window.store=Ge,Ve.run(ze);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));pe.a.render(r.a.createElement(y.a,{basename:"/weather"},r.a.createElement(l.a,{store:Ge},r.a.createElement(me,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},83:function(e,t,a){e.exports=a(114)},84:function(e,t,a){}},[[83,1,2]]]);
//# sourceMappingURL=main.ac863768.chunk.js.map